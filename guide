카프카(Kafka)를 설치(Install)해보자

카프카를 설치하는 환경은 Virtualbox를 통해 Centos7에 설치
 -Centos7에 OpenJDK8 
 
 
 2. 설치전 작업 (root)
 
vi /etc/hosts
0.0.0.0 kafka1  

## 주키퍼 포트 
 firewall-cmd --permanent --zone=public --add-port=2181/tcp
 firewall-cmd --permanent --zone=public --add-port=2888/tcp
 firewall-cmd --permanent --zone=public --add-port=3888/tcp

## 카프카 포트
 firewall-cmd --permanent --zone=public --add-port=9092/tcp

## 방화벽 재시작 
 firewall-cmd --reload

3. 주기퍼(Zookeeper) 설치 http://apache.tt.co.kr/zookeeper/stable/

tar zxf zookeeper-3.4.12.tar.gz 
ln -s zookeeper-3.4.12 zookeeper

mkdir data
echo 1 > data/myid  

cd zookeeper/conf
cp zoo_sample.cfg zoo.cfg
vi zoo.cfg

[kafka@oframe conf]$ cat zoo.cfg 
# The number of milliseconds of each tick
tickTime=2000
# The number of ticks that the initial 
# synchronization phase can take
initLimit=10
# The number of ticks that can pass between 
# sending a request and getting an acknowledgement
syncLimit=5
# the directory where the snapshot is stored.
# do not use /tmp for storage, /tmp here is just 
# example sakes.
dataDir=/tmp/zookeeper
# the port at which the clients will connect
clientPort=2181
# the maximum number of client connections.
# increase this if you need to handle more clients
#maxClientCnxns=60
#
# Be sure to read the maintenance section of the 
# administrator guide before turning on autopurge.
#
# http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance
#
# The number of snapshots to retain in dataDir
#autopurge.snapRetainCount=3
# Purge task interval in hours
# Set to "0" to disable auto purge feature
#autopurge.purgeInterval=1
server.1=kafka1:2888:3888



####이제 실행시켜보자.

./zookeeper/bin/zkServer.sh start
정상적이라면 아래처럼 메시지가 출력된다.

ZooKeeper JMX enabled by default
Using config: /home/ykkim/zookeeper/bin/../conf/zoo.cfg
Starting zookeeper ... STARTED


*FAILED가 나오면 apache-zookeeper-3.5.8-bin.tar.gz 으로 다시 설치를 한다.

###이제 정지시켜보자
./zookeeper/bin/zkServer.sh stop

다음처럼 Alias를 걸어서 기동을 시켜보자
# ZOOKEEPER ENV
export ZOO_HOME=/home/kafka/apache-zookeeper-3.5.8-bin/
PATH="/home/kafka/apache-zookeeper-3.5.8-bin/bin:/home/kafka/apache-zookeeper-3.5.8-bin/lib:${PATH}"
export PATH
alias zooboot='zkServer.sh start'
alias zoodown='zkServer.sh stop'





